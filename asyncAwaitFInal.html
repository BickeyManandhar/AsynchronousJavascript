<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Async / Await Final</title>
</head>
<body>
  <script>
    let stocks = {
      fruits: ["strawberry", "grapes", "banana", "apple"],
      liquid: ["water", "ice"],
      holder: ["cone", "cup", "stick"],
      toppings: ["chocolate", "peanuts"],
    }

    let isShopOpen = true; //true will resolve and false will reject

    function time(ms){
      return new Promise((resolve,reject)=>{
        if(isShopOpen){
          setTimeout(resolve,ms);
        }else{
          reject(console.log("Shop is closed."));
        }
      });
    }

    async function kitchen(){
      try{
        await time(2000);
        console.log(`${stocks.fruits[2].toUpperCase()} was selected.`);

        await time(0);
        console.log('Start the production.');

        await time(2000);
        console.log('Cut the fruit.');

        await time(1000);
        console.log(`${stocks.liquid[0].toUpperCase()} and ${stocks.liquid[1].toUpperCase()} were added.`);

        await time(1000);
        console.log('Start the machine');

        await time(2000);
        console.log(`Holder: ${stocks.holder[1].toUpperCase()} was selected.`);

        await time(3000);
        console.log(`Toppings: ${stocks.toppings[1].toUpperCase()} was selected.`);

        await time(2000);
        console.log('Ice-cream served...');

      }catch(error){
        console.log("Customer left.",error);
      }finally{
        console.log("Day ended, shop is closed.");
      }
    }

    kitchen();

  </script>
</body>
</html>